<launch>

    <arg name="bag_file" default="/home/tam/DataSet/20231116_CG170_baseball/1116_01_1699345333-fourth.bag"/>
    <arg name="image_topic" default="/camera/image_sync_ir"/>
    <arg name="uncompressed_topic" default="/camera/image_raw"/>

    <!-- Trajectory Server -->
    <node pkg="hector_trajectory_server" type="hector_trajectory_server" name="trajectory_server_orb_slam3" output="screen" ns="orb_slam3_ros" >
        <param name="/target_frame_name" value="/world" />
        <param name="/source_frame_name" value="/camera" />
        <param name="/trajectory_update_rate" value="20.0" />
        <param name="/trajectory_publish_rate" value="20.0" />
    </node>

    <!-- Visualization - RViz-->
    <node name="rviz" pkg="rviz" type="rviz" args="-d $(find wrapper)/config/orb_slam3_with_imu.rviz" output="screen" />
    
    <!-- 注意这里bag文件的路径必须为绝对路径-->  
	<!-- <node pkg="rosbag" type="record" name="bag_record" args="topic-name1 topic-name1 -o /home/xx/xxx/xxx/xxx.bag"/>                                                                            
    </node> -->
    
    <!-- 注意这里bag文件的路径必须为绝对路径
    <node pkg="rosbag" type="play" name="player" output="screen" />    -->
    <!-- <node pkg="rosbag" type="play" name="player"  args=" -/-clock -s 10 /home/tam/DataSet/20231116_CG170_baseball/1116_01_1699345333-fourth.bag"/>  -->
    <node pkg="rosbag" type="play" name="player"  args="$(arg bag_file)  -s 10" /> 

    <!-- <remap from="origin_topic1" to="new_topic1" /> -->

    <!-- 如果需要使用rosbag中的时间，则需要在launch中增添一句： -->
    <!-- <param name="use_sim_time" value="true" /> -->

    <!-- 发布解压缩后的图像 -->
    <node pkg="image_transport" type="republish" name="image_republisher" args="compressed in/compressed:=$(arg image_topic) out:=$(arg uncompressed_topic)"/>
    <!-- <node pkg="image_transport" type="republish" name="image_republisher" args="compressed in:=/camera/image_sync_ir compressed out:=/camera/image_raw"/> -->
    <!-- <node pkg="image_transport" type="republish" name="image_republisher" args="compressed in/compressed:=/camera/image_sync_ir out:=/camera/image_raw"/> -->
    
    <!-- <node name="image_transport" pkg="image_transport" type="republish" args="compressed in:=/camera/image_sync_ir raw out:=/camera/image_raw" />  -->
    <!-- <node pkg="image_transport" type="republish" name="image_republisher" args="$(arg image_topic) compressed in:=raw out:=$(arg uncompressed_topic)"/> -->
    <!-- <node pkg="image_transport" type="republish" name="image_republisher" args="compressed in:=$(arg image_topic) raw out:=$(arg uncompressed_topic)"/> -->
</launch>